import{a as P,t as R,c as Ue}from"../chunks/disclose-version.jpAycE0-.js";import{i as Ge}from"../chunks/legacy.NfxdfGNp.js";import{aG as He,aH as We,aI as Ye,b as Je,h as W,c as Ke,p as Ze,a as Qe,f as Xe,U as et,aA as tt,g as nt,t as Be,j as ot,v as Q,x as M,aF as lt,k as L,m as _,aE as Me,l as k,am as G,i as at}from"../chunks/runtime.B4WY0L9c.js";import{l as st,b as rt,s as _e}from"../chunks/render.Bk5rrXPL.js";import{i as it}from"../chunks/if.BAoRbjCG.js";import{e as Te,i as Ae,r as ut}from"../chunks/attributes.BLbcvymo.js";import{o as ct}from"../chunks/index-client.DDK-u9jn.js";function dt(e,t,l){W&&Ke();var a=e,o=et,s,n=He()?We:Ye;Je(()=>{n(o,o=t())&&(s&&Ze(s),s=Qe(()=>l(a)))}),W&&(a=Xe)}function ue(e,t){var l=e.__className,a=pt(t);W&&e.className===a?e.__className=a:(l!==a||W&&e.className!==a)&&(t==null?e.removeAttribute("class"):e.className=a,e.__className=a)}function pt(e){return e??""}function ft(e,t,l=t){var a=He();st(e,"input",()=>{var o=ce(e)?de(e.value):e.value;l(o),a&&o!==(o=t())&&(e.value=o??"")}),tt(()=>{var o=t();if(W&&e.defaultValue!==e.value){l(ce(e)?de(e.value):e.value);return}ce(e)&&o===de(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function ce(e){var t=e.type;return t==="number"||t==="range"}function de(e){return e===""?null:+e}function ht(e,t,l){let a=[],o=Math.floor(t/3),s=Math.floor(l/3),n=o*3,r=o*3+3,i=s*3,h=s*3+3;for(let c=n;c<r;c++)for(let p=i;p<h;p++)a.push(e[c][p]);return a}function De(e,t,l,a){if(e[t].includes(a))return!0;let o=[],s;for(let n=0;n<9;n++)s=e[n][l],o.push(s);return!!(o.includes(a)||ht(e,t,l).includes(a))}function Oe(e,t,l,a){let o,s;for(;e[t][l]>0;)if(l<8)l+=1;else if(l==8&&t<8)l=0,t+=1;else if(l==8&&t==8)return[!0,e,a];for(let n=1;n<10;n++)if(!De(e,t,l,n)){if(e[t][l]=n,a.push([t,l,n,"backtrack"]),o=Oe(e,t,l,a),s=o[0],e=o[1],s)return[!0,e,a];e[t][l]=0,a.push([t,l,0,"backtrack"])}return[!1,e,a]}function qe(e){for(let t=0;t<9;t++)for(let l=0;l<9;l++){let a=e[t][l];if(a!==0){if(e[t][l]=0,De(e,t,l,a))return[!1,`Duplicate value in row: ${t}, col: ${l}: ${a}`];e[t][l]=a}}return[!0,"success"]}function mt(e){let t,l,a,o,s=[];if(a=qe(e),t=Oe(e,0,0,s),o=t[0],e=t[1],s=t[2],o){a=qe(e);let n=a[0],r=a[1];n?l="success":l=r}else l="failure";return[l,s]}function I(e="easy"){let t;if(e==="random"){let l=["easy","medium","hard","evil"],a=Math.floor(l.length*Math.random());e=l[a]}return e==="easy"?(t=[[5,3,0,0,7,0,0,0,0],[6,0,0,1,9,5,0,0,0],[0,9,8,0,0,0,0,6,0],[8,0,0,0,6,0,0,0,3],[4,0,0,8,0,3,0,0,1],[7,0,0,0,2,0,0,0,6],[0,6,0,0,0,0,2,8,0],[0,0,0,4,1,9,0,0,5],[0,0,0,0,8,0,0,7,9]],t):e==="medium"?(t=[[0,0,2,0,0,9,0,0,0],[0,3,0,8,0,1,2,0,0],[1,0,0,0,0,0,0,0,9],[0,2,5,0,0,0,4,0,0],[0,7,0,0,0,0,8,0,2],[0,0,0,6,0,0,9,3,0],[8,0,0,5,2,0,0,0,0],[0,0,0,3,4,0,6,0,0],[0,0,0,0,0,7,0,0,0]],t):e==="hard"?(t=[[0,0,0,7,0,8,0,3,5],[5,9,3,0,4,0,0,0,0],[0,0,0,0,0,0,1,0,0],[0,0,4,0,0,0,0,2,8],[0,0,9,0,5,0,3,0,0],[2,6,0,0,0,0,9,0,0],[0,0,8,0,0,0,0,0,0],[0,0,0,0,2,0,5,9,7],[4,7,0,9,0,3,0,0,0]],t):e==="evil"?(t=[[0,0,0,6,3,5,2,0,0],[0,0,5,7,0,0,0,0,9],[0,7,0,0,0,0,0,0,0],[5,0,0,0,0,4,6,0,0],[0,9,0,0,5,0,0,7,0],[0,0,4,8,0,0,0,0,5],[0,0,0,0,0,0,0,4,0],[7,0,0,0,0,2,3,0,0],[0,0,2,5,9,6,0,0,0]],t):(t=[[5,3,0,0,7,0,0,0,0],[6,0,0,1,9,5,0,0,0],[0,9,8,0,0,0,0,6,0],[8,0,0,0,6,0,0,0,3],[4,0,0,8,0,3,0,0,1],[7,0,0,0,2,0,0,0,6],[0,6,0,0,0,0,2,8,0],[0,0,0,4,1,9,0,0,5],[0,0,0,0,8,0,0,7,9]],t)}function vt(e,t){let l=1;return t<=0?l=Math.round(e/10):t<=10?l=Math.round(e/100):t<=100&&(l=Math.round(e/1e3)),l<1&&(l=1),l}function pe(e){let t=10**(3-e/100);return t<=1&&(t=0),t}function fe(e,t,l){return setInterval(function(){e(t)},l)}function gt(e,t,l){let a=l.length,o,s=new Set,n=new Set,r=Pe(e,t,a);for(;r.length>0;){let i=r.pop();o=l[i[1][0]][i[1][1]],s.add(o)}for(let i=0;i<=a;i++)s.has(i)||n.add(i);return n}function bt(e){e.value=="OFF"?e.value="ON":e.value="OFF"}function Ie(e){let t=e.length;for(let l=0;l<t;l++)for(let a=0;a<t;a++)e[l][a]===0&&ve(l,a,0,"empty")}function X(e){let t,l=e.length;for(let a=0;a<l;a++)for(let o=0;o<l;o++)e[a][o]===0&&(t=gt(a,o,e),yt(a,o,t,"domain"))}function yt(e,t,l,a="empty"){let o="<p>",s;for(s=1;s<=3;s++)o+=he(s,l);for(o+="</p><p>",s=4;s<=6;s++)o+=he(s,l);for(o+="</p><p>",s=7;s<=9;s++)o+=he(s,l);o+="</p>";let n=["empty","fixed","backtrack","AC3","backtrackPlusAC3","finalAC3"],r=document.querySelector(`.row-${e} .col-${t}`);if(r.className.indexOf("fixed")===-1){for(let i of n)r.classList.remove(i);r.classList.add("domain"),r.innerHTML=o}}function he(e,t){return t.has(e)?String(e):" "}function Ee(e){let t=e[0][0].maxDomainVal;if(!Number.isFinite(t)||t<=0)return!1;let l;for(let a=0;a<t;a++)for(let o=0;o<t;o++){if(!e[a][o].fixed)continue;l=e[a][o].getOnlyValue();for(let r=0;r<t;r++)if(r!==o&&e[a][r].domain.size===1&&e[a][r].getOnlyValue()===l)return!1;for(let r=0;r<t;r++)if(r!==a&&e[r][o].domain.size===1&&l===e[r][o].getOnlyValue())return!1;let s=Math.floor(a/3)*3,n=Math.floor(o/3)*3;for(let r=s;r<s+3;r++)for(let i=n;i<n+3;i++)if(!(r===a&&i===o)&&e[r][i].domain.size===1&&l===e[r][i].getOnlyValue())return!1}return!0}function Pe(e,t,l){let a=[];for(let n=0;n<l;n++)n!==t&&a.push([[e,t],[e,n]]);for(let n=0;n<l;n++)n!==e&&a.push([[e,t],[n,t]]);let o=Math.floor(e/3)*3,s=Math.floor(t/3)*3;for(let n=o;n<o+3;n++)for(let r=s;r<s+3;r++)n!=e&&r!=t&&a.push([[e,t],[n,r]]);return a}function xt(e){let t=e[0][0].maxDomainVal,l=[],a;for(let o=0;o<t;o++)for(let s=0;s<t;s++)e[o][s].fixed||(a=Pe(o,s,t),l=l.concat(a));return l}function wt(e,t,l,a,o){let s,n;for(s=0;s<l;s++)s!==t&&!o[e][s].fixed&&a.push([[e,s],[e,t]]);for(n=0;n<l;n++)n!==e&&!o[n][t].fixed&&a.push([[n,t],[e,t]]);let r=Math.floor(e/3)*3,i=Math.floor(t/3)*3;for(n=r;n<r+3;n++)for(s=i;s<i+3;s++)n!==e&&s!==t&&!o[n][s].fixed&&a.push([[n,s],[e,t]]);return a}function kt(e,t,l="empty"){document.querySelector(`.row-${e} .col-${t}`).classList.add("boxborder")}function me(e,t,l="empty"){document.querySelector(`.row-${e} .col-${t}`).classList.remove("boxborder")}function ve(e,t,l,a="none"){let o=["empty","fixed","backtrack","AC3","backtrackPlusAC3","finalAC3","domain"];if(!(l in[0,1,2,3,4,5,6,7,8,9]))throw"Bad value in square at "+e+", "+t+": "+l;let n=document.querySelector(`.row-${e} .col-${t}`);if(!n){console.warn(`Element with selector .row-${e} .col-${t} not found.`);return}if(n.classList.contains("fixed"))return;for(let h of o)n.classList.remove(h);o.indexOf(a)!==-1&&n.classList.add(a),l===0?n.innerHTML="":n.innerHTML=String(l);let r={fixed:"<p>Puzzle ready!</p><p>Choose another puzzle or choose a solver.</p>",backtrack:"<p>Solving backtracking.</p>",backtrackPlusAC3:"<p>Solving with AC-3 during backtracking.</p>",finalAC3:"<p>Solving with AC-3: final solution for box.</p>",AC3:"<p>Solving with AC-3.</p>",none:"<p>none</p>","":"<p>unknown</p>",empty:"<p>empty</p>",undobacktrack:"<p>Undoing square that was solved with backtracking.</p>",undobacktrackPlusAC3:"<p>Undoing square that was solved with AC-3 during backtracking.</p>",undofinalAC3:"<p>Undoing square that was solved with AC-3.</p>",undoAC3:"<p>Undoing square that was solved with AC-3.</p>"};if(!r.hasOwnProperty(a))throw"boxStyle "+a+" not defined";let i=document.querySelector(".explanation");i.innerHTML=r[a]}function St(e,t,l,a){let o=e.length,s=e[0].length,n=new Array(o),r=new Array(o),i;l>=t.length-1&&(l=t.length-1);let h=t[l+1];a&&me(h[0],h[1],h[2]);for(let c=0;c<o;c++){n[c]=new Array(s),r[c]=new Array(s);for(let p=0;p<s;p++){let x=e[c][p];x>0?r[c][p]="fixed":r[c][p]="",n[c][p]=x}}for(let c=0;c<l;c++)i=t[c],n[i[0]][i[1]]=i[2],r[i[0]][i[1]]=i[3];i=t[l],r[i[0]][i[1]]=i[3];for(let c=0;c<o;c++)for(let p=0;p<s;p++){let x=document.querySelector(`.row-${c} .col-${p}`);x&&(x.textContent=e[c][p]!==0?e[c][p]:"",x.classList.toggle("empty",e[c][p]===0),x.classList.toggle("filled",e[c][p]!==0))}return n}function N(e,t,l,a,o=!1){this.row=e,this.col=t,this.maxDomainVal=l,this.fixed=o,this.domain=a}N.prototype.replace=function(e){if(this.fixed)throw"The domain is fixed; cannot replace value.";this.domain=new Set([e])};N.prototype.getDomainSize=function(){return this.domain.size};N.prototype.getOnlyValue=function(){if(this.getDomainSize()!==1)throw"Domain of one expected, but was 0 or > 1";return this.domain[Symbol.iterator]().next().value};function Lt(e){for(let t of e)for(let l of t)if(l.getDomainSize()>1)return l;throw"Looking for next unassigned, but everything seems to be assigned!"}function Ct(e,t){let l=!1;if(t.getDomainSize()==1){let a=t.getOnlyValue();e.domain.has(a)&&(e.domain.delete(a),l=!0)}return new Array(e,l)}function zt(e){let t=e.length;var l=new Array;let a,o,s;for(let n=0;n<t;n++){a=new Array;for(let r=0;r<t;r++)if(o=e[n][r],o==0){s=new Set;for(let i=1;i<=t;i++)s.add(i);a.push(new N(n,r,t,s))}else s=new Set,s.add(o),a.push(new N(n,r,t,s,!0));l.push(a)}return l}function Bt(e){let t;if(e===-1)throw"board is -1";let l=e.length,a=e[0].length,o=new Array(l);for(let s=0;s<l;s++){t=new Array(a);for(let n=0;n<a;n++)e[s][n].getDomainSize()===1?t[n]=e[s][n].getOnlyValue():e[s][n].getDomainSize()===0?t[n]=-1:t[n]=0;o[s]=t}return o}function Fe(e){let t;if(e===-1||e===void 0)return!1;let l=e.length,a=e[0].length;for(let o=0;o<l;o++)for(let s=0;s<a;s++)if(t=e[o][s],t.getDomainSize()>1)return!1;return!0}function Ve(e,t,l,a){let o,s;if(Fe(e))return[e,l,[]];let n=e.length,r=Lt(e);for(let i of r.domain){let h=new Array(n);for(let u=0;u<n;u++){h[u]=new Array(n);for(let v=0;v<n;v++){o=new Set;for(let T of e[u][v].domain)o.add(T);let S=e[u][v].fixed;h[u][v]=new N(u,v,n,o,S)}}h[r.row][r.col].replace(i),l.push([r.row,r.col,i,"backtrack"]);let c=[];c.push([r.row,r.col,0,"undobacktrack"]);let p,x;if([s,p,x]=je(h,t,"backtrackPlus"),l=[].concat(l,p),c=[].concat(c,x),s!==-1){let u;if([u,l,c]=Ve(h,t,l),u!==-1)return[u,l,c]}l=[].concat(l,c.reverse()),c=[]}return[-1,l,[]]}function je(e,t,l=""){let a=[],o=[];function s(h,c,p=""){let x=[],u,v,S=[];for(let T=0;T<c.length;T++){v=c[T];let y=h[v[0][0]][v[0][1]],F=h[v[1][0]][v[1][1]];if(v[0][0]===v[1][0]&&v[0][1]===v[1][1])throw"invalid constraint";if(y.row===F.row&&y.col===F.col)throw"invalid constraint: xi = xj";if(y.fixed)throw"The value in this box is fixed; should not have a constraint.";if([y,u]=Ct(y,F),u&&y.getDomainSize()==1){let Y=y.getOnlyValue();o.push([y.row,y.col,Y,p+"AC3"]),S.push([y.row,y.col,0,"undoAC3"])}if(u){if(y.getDomainSize()===0)return[[],S,!1];x=wt(y.row,y.col,y.maxDomainVal,x,h)}}return[x,S,!0]}let n,r=t,i=0;for(;r.length>0&&i<100;){let h;if([r,h,n]=s(e,r,l),a=[].concat(a,h),!n)return[-1,o,a];i++}if(i>=99)throw"Tried to go through constraint loop too many times, so quit.";return[e,o,a]}function Mt(e){let t=[],l=[],a,o=zt(e),s=Ee(o);if(!s)return["Puzzle is not valid!",t];let n=xt(o);return[o,l,a]=je(o,n,"final"),[o,t]=Ve(o,n,[]),t=[].concat(l,t),s=Ee(o),s?Fe(o)?(Bt(o),["success",t]):["failure",t]:["Solved puzzle is not valid!",o]}var _t=R('<meta charset="utf-8">'),Tt=R("<td> </td>"),At=R("<td></td>"),qt=R("<tr></tr>"),It=R('<table id="sudokuGraphic" class="ml-auto mr-auto svelte-yg3fx0"><tbody></tbody></table>'),Et=R(`<main class="flex flex-col bg-[#FDEEDC] text-left text-lg"><div class="mx-auto max-w-4xl flex flex-col px-6 py-4 mt-6"><h1 class="text-4xl flex justify-center mb-2">Sudoku Solver</h1> <div class="mx-auto max-w-4xl px-6 py-4 mb-10">Under construction. Some features are not yet implemented and bugfixes and tests are in progress. For fully functional code please see the <a class="underline" href="https://github.com/prowe12/game-solvers/tree/main/sudoku">Python Sudoku Solver</a> and <a class="underline" href="https://github.com/prowe12/gamesolverhub/tree/master/sudoku">Javascript & CSS Sudoku Solver</a>.</div> <div class="max-w-8xl flex justify-center mb-20"><div id="grid-container-puzzle" class="svelte-yg3fx0"><div class="flex flex-col svelte-yg3fx0"><fieldset id="selections" class="mb-10 bg-white"><legend>Selections</legend> <p>Choose Puzzle</p> <select name="puzzle" id="dropdownpuzzle" class="button pb-80 svelte-yg3fx0"><option>Easy</option><option>Medium</option><option>Hard</option><option>Evil</option><option>Random</option></select> <p class="mt-4">Choose Solver</p> <p><button name="solverDemoBacktrack" id="solverDemoBacktrack" class="button svelte-yg3fx0">Backtracking</button></p> <p><button name="playSudokuSolver" id="playSudokuSolver" class="button svelte-yg3fx0">AC-3 and Backtracking</button></p></fieldset> <div class="bg-white p-2 w-3/5 mx-auto"><h2>Key for colors</h2> <p class="backtrack svelte-yg3fx0">Backtracking</p> <p class="finalAC3 svelte-yg3fx0">AC-3, solved</p> <p class="backtrackPlusAC3 svelte-yg3fx0">AC-3, value may change</p></div></div> <div class="svelte-yg3fx0"><!> <div id="sudokuControls" class="pt-4 svelte-yg3fx0"><fieldset id="controls" class="bg-white"><legend>Controls</legend> <button type="button" id="rewindToBeg" class="button controlButton svelte-yg3fx0">Restart</button> <button type="button" id="rewind" class="button controlButton svelte-yg3fx0">Rewind</button> <button type="button" id="pauseButton" class="button controlButton svelte-yg3fx0">Pause</button> <button type="button" id="playPause" class="button controlButton svelte-yg3fx0">Play</button> <button type="button" id="forwardToEnd" class="button controlButton svelte-yg3fx0">Finish</button> <label for="speed" class="inline-block w-36">Speed</label> <input id="speed" class="slider anim-speed svelte-yg3fx0" type="range" min="0" max="300"> <p class="mb-4"> </p> <button type="button" id="showDomainButton" class="button controlButton svelte-yg3fx0" value="OFF">Show the domain</button> <button type="button" id="step" class="button controlButton svelte-yg3fx0">Step</button> <button type="button" id="stepBack" class="button controlButton svelte-yg3fx0">Undo</button></fieldset></div></div> <div class="svelte-yg3fx0"><p class="state"></p> <p class="explanation"></p></div></div></div> <div class="pt-4"><h2 class="font-bold text-center">How to Play</h2> <p class="pb-4">A Sudoku board is made up of a 9x9 grid of 81 cells. The grid includes 9 boxes of size 3x3.</p><p class="pb-4">The board starts with preset or "fixed" numbers that cannot be changed. The player's task is to solve the puzzle by filling in the remaining boxes.</p> <p class="pb-4">The puzzle is solved when each of the 81 cells contain an integer between 1 and 9, and all of the integers 1-9 appear in every row, column, and 3x3 box of the board.</p></div> <div class="pt-4"><h2 class="font-bold text-center">How the Solver Works</h2> <p>Sudoku is a type of Constraint Satisfaction Problem, or <a href="https://en.wikipedia.org/wiki/Constraint_satisfaction_problem">CSP</a>. The solver uses the Arc Consistency Algorithm #3 (<a href="https://en.wikipedia.org/wiki/AC-3_algorithm">AC-3</a>), and <a href="https://simple.wikipedia.org/wiki/Backtracking">backtracking</a> with the Minimum Remaining Values and degree heuristics.</p></div> <div class="flex flex-row gap-8 mt-8"><div class="flex-1"><h2 class="font-bold text-center">AC-3</h2> <p class="pb-4">To use AC-3, first every cell is given a domain of possible integers 1-9, with the exception of the cells with fixed starting values. For fixed cells, the domain consists of the fixed value.</p> <p class="pb-4">Next, a list of constraints is created for each cell. For example, the cell at (row, column) = (1,1) must not have the same value as any cell in its row (e.g. the cells at (1,1), (1,2), ... (1,9)), any cell in its column (i.e. (2,1), (3,1), ... (9,1)), or any cell in its box (i.e. (1,2), (1,3), (2,1), (2,2), (2,3),(3,1), (3,2), (3,3)). Leaving out repeats, these represent the 20 constraints for cell (1,1).</p> <p class="pb-4">AC-3 progresses by going through the list of constraints one by one. For each cell x<sub>i</sub> and constraining box x<sub>j</sub>, if there is a single value in the domain of x<sub>j</sub>, that value is removed from the domain of x<sub>i</sub>. If this causes the domain of x<sub>i</sub> to contain only a single value, then a new set of "reverse constraints" is added to the list of constraints, to be worked through. For the reverse constraints, the box that was previously x<sub>i</sub> becomes the constraining cell x<sub>j</sub> for all the boxes that share its row, column, and subgrid.</p> <p class="pb-4">After all the constraints have been worked through, the puzzle may not be completely solved. Thus AC-3 is not necessarily sufficient to find a solution, if one exists. In this case, another method is needed.</p></div> <div class="flex-1"><h2 class="font-bold text-center">Backtracking</h2> <p class="pb-4">Backtracking uses a trial-and-error approach to solve the puzzle. For an empty cell, a value is selected from the domain of allowable values. These can be chosen randomly, in order, or using a heuristic as described below.</p><p class="pb-4">The guess value is placed in the cell and used to constrain the cells that share the row, column, and 3x3 box. The process is repeated for another empty cell, new constraints are accounted for, and so on.</p> <p class="pb-4">This continues until either the puzzle is solved, or a cell is found to have no allowable value (because all values 1-9 are already present in the row, column, and subgrid).</p> <p class="pb-4">If there is no allowable value, the algorithm "backtracks" to the last cell that had multiple values in its domain, emptying cells as it backs up. A different value from the domain is tried, and the algorithm proceeds forward again for as long as it can. Because of the need to undo changes when the algorithm backtracks, recursion is generally used.</p> <p class="pb-4">Backtracking can be used alone or with another method like AC-3. For example, if AC-3 gets stuck, backtracking can take over. Unlike AC-3, backtracking can almost always solve a Sudoku puzzle if it is solveable.</p></div></div> <div class="pt-4"><h2 class="font-bold text-center">Heuristic</h2> <p class="pb-4">To speed up the solver, a heuristic can be used. A <a href="https://en.wikipedia.org/wiki/Heuristic">heuristic</a> is a problem-solving technique "that is not guaranteed to be optimal, perfect, or rational, but is nevertheless sufficient for reaching an immediate, short-term goal or approximation". Useful heuristics for Sudoku are as follows.</p> <p class="pb-4">The Minimum Remaining Values (MRV) heuristic speeds up the sover by choosing the next box to solve by identifying the box with the shortest list of allowable values.</p> <p class="pb-4">The degree heuristic speeds up the solver by choosing the value involved in the largest number of constraints with remaining unassigned values.</p></div></div></main>`);function $t(e,t){nt(t,!1);let l=Me(20),a="backtracking",o=[],s,n=0,r=!1,i=!1,h={backtracking:"<p>Solving the outlined square with backtracking.</p><p>If there is more than one value in the domain, backtracking tries one, makes a note of the others, and then moves on to the next box.<p>This continues until it encounters an empty square, and then it backs up.</p><p>Click 'Step' again to keep going.",ac3:"<p>Solving the outlined square with AC-3.</p><p>AC-3 solves any boxes with only one value in the domain first. After solving a box, the domains of all the boxes that depend on it are recomputed.</p><p>If all incomplete boxes have more than one value in the domain, it uses backtracking to try out a value from the domain of a square.</p>"},c={backtracking:"<p>Click 'Step' to see backtracking in action.</p>",ac3:"<p>AC-3 solves only the squares with a single value in the domain.</p><p>Click 'Step' to see AC-3 in action.</p>"},p="Easy",x=I(p),u=I(p),v=function(f){if(n<f.length)ve(f[n][0],f[n][1],f[n][2],f[n][3]),u[f[n][0]][f[n][1]]=f[n][2],n+=1;else{clearInterval(s);let C=document.querySelector(".state");C.innerHTML="<p>Puzzle Completed!</p><p>Continue using controls or choose a different puzzle or solver.</p>";let A=document.querySelector(".explanation");A.innerHTML="<p></p>",r=!1}},S=Me([[5,3,0,0,7,0,0,0,0],[6,0,0,1,9,5,0,0,0],[0,9,8,0,0,0,0,6,0],[8,0,0,0,6,0,0,0,3],[4,0,0,8,0,3,0,0,1],[7,0,0,0,2,0,0,0,6],[0,6,0,0,0,0,2,8,0],[0,0,0,4,1,9,0,0,5],[0,0,0,0,8,0,0,7,9]]);ct(async()=>{var ze;let f=((ze=document.getElementById("dropdownpuzzle"))==null?void 0:ze.value)||"easy",C=document.getElementById("rewindToBeg"),A=document.getElementById("rewind"),V=document.getElementById("playPause"),H=document.getElementById("forwardToEnd"),j=document.getElementById("step"),q=document.getElementById("stepBack");document.getElementById("myRange"),document.getElementById("demo");let D=document.querySelector(".slider"),$=document.getElementById("pauseButton"),J=document.getElementById("playSudokuSolver"),K=document.getElementById("solverDemoBacktrack"),U=v,z=D.value||12,w=10**(3-z/100);document.getElementById("sudokuGraphic"),document.querySelector("#dropdownpuzzle").addEventListener("change",function(){B(),f=document.getElementById("dropdownpuzzle").value,x=I(f),u=I(f),Q(S,I(f)),u=M(S),n=0,o=[],o=re(f)}),document.querySelector("#solverDemoBacktrack").addEventListener("click",function(){a="backtracking",B(),E(u),o=re(f)}),document.querySelector("#playSudokuSolver").addEventListener("click",function(){a="ac3",B(),E(u),J.classList.add("selectedsolver"),K.classList.remove("selectedsolver"),ie();let d=document.querySelector(".state");d.innerHTML="<p>You have chosen backtracking.</p><p>Please wait while I solve the puzzle.</p>";let m=document.querySelector(".explanation");m.innerHTML="<p></p>";let g=I(f),b=Mt(g);u=g,b[0],o=b[1],d.innerHTML="<p>Solve using AC-3 and backtracking. You can: </p>1) Choose another puzzle or solver on the left. <p>2) Use the controls to play the solution.</p><p>3) Click 'Show the domain' to walk through an explanation of the solution."}),D.addEventListener("click",()=>{z=D.value,w=pe(z),r&&(clearInterval(s),s=fe(U,o,w))}),V.addEventListener("click",function(){E(u),B(),V.classList.add("selected"),clearInterval(s),r=!0;let d=document.querySelector(".state");if(d.innerHTML="<p>Playing Solution.</p>",n>=o.length){let m=document.querySelector(".state");m.innerHTML="<p>Puzzle Complete!</p><p>Continue using controls or choose a different puzzle or solver.</p>";let g=document.querySelector(".explanation");g.innerHTML="<p></p>",r=!1,V.classList.remove("selected");return}z=D.value,w=pe(z),s=fe(v,o,w),U=v}),A.addEventListener("click",function(){E(u),B(),A.classList.add("selected"),clearInterval(s),r=!0;let d=document.querySelector(".state"),m=document.querySelector(".explanation");if(m.innerHTML="<p></p>",n===0){d.innerHTML="<p>At the beginning.</p><p>Use controls to play the solution.</p><p>Or choose a different puzzle or solver.</p>";return}d.innerHTML="<p>Rewinding.</p>",z=D.value,w=pe(z);let g=vt(n,w),b=function(O){if(n>0)u=Ce(Math.max(n-g,0),u),n-=g;else{clearInterval(s),n=0,r=!1;let Z=document.querySelector(".explanation");Z.innerHTML="<p>Rewound to beginning.</p><p>Continue using controls to play the solution.</p><p>Or choose a different puzzle or solver.</p>",A.classList.remove("selected")}};s=fe(b,o,w),U=b}),H.addEventListener("click",async function(){clearInterval(s),E(u),B(),H.classList.add("selected");let d=document.querySelector(".state");d.innerHTML="<p>Working on completing the puzzle. Please wait.</p>",r=!0;function m(){return new Promise((b,O)=>{setTimeout(()=>{for(H.classList.add("selected"),n=n;n<o.length;(n+=1)-1)ve(o[n][0],o[n][1],o[n][2],o[n][3]);b()},0)})}await m(),d=document.querySelector(".state"),d.innerHTML="<p>Puzzle Completed!</p><p>Continue using controls to play the solution.</p><p>Or choose a different puzzle or solver.</p>";let g=document.querySelector(".explanation");g.innerHTML="<p></p>",r=!1,H.classList.remove("selected")});function se(){!i&&!(typeof o>"u")&&!(typeof n>"u")&&!(typeof o[n]>"u")?(kt(o[n][0],o[n][1],o[n][3]),i=!0):(i&&me(o[n][0],o[n][1],o[n][3]),v(o),i=!1)}function re(d){document.getElementById("solverDemoBacktrack").classList.add("selectedsolver"),document.getElementById("playSudokuSolver").classList.remove("selectedsolver");let b=document.querySelector(".state");b.innerHTML="<p>You have chosen backtracking.</p><p>Please wait while I solve the puzzle.</p>";let O=document.querySelector(".explanation");O.innerHTML="<p></p>";let Z=I(d),Ne=mt(Z);u=Z;let Re=Ne[1];return b.innerHTML="<p><b>Suggested use</b></p><p>Use the top set of controls<br> and the speed slider to<br>move through the solution.</p>or<p></p><p>Click 'Show the domain'<br>and 'step' to step through<br>the solution.</p><br><p>Choose a new puzzle and <br>solver on the left.</p>",Re}C.addEventListener("click",async function(){E(u),B(),C.classList.add("selected"),r=!0;function d(){return new Promise((b,O)=>{setTimeout(()=>{ie(),Q(S,I(f)),u=M(S),b()},100)})}await d();let m=document.querySelector(".state");m.innerHTML="<p>At the beginning.</p><p>Continue using controls to play the solution.</p><p>Or choose a different puzzle or solver.</p>";let g=document.querySelector(".explanation");g.innerHTML="<p></p>",r=!1,C.classList.remove("selected")}),$.addEventListener("click",function(){r=!1,B(),$.classList.add("selected");let d=document.querySelector(".state");d.innerHTML="<p>Paused.</p>";let m=document.querySelector(".explanation");m.innerHTML="<p></p>",clearInterval(s)}),showDomainButton.addEventListener("click",function(){B();let d=document.getElementById("showDomainButton");bt(d);let m=document.querySelector(".state"),g=document.querySelector(".explanation");if(clearInterval(s),d.value==="ON"){showDomainButton.classList.add("selected");let b="<p>Showing the domain of each cell.</p><p>The domain consists of all the numbers 0-9 that are not already present in the same row, column, or 3x3 box."+c[a];m.innerHTML=b,g.innerHTML="<p></p>",X(u)}else showDomainButton.classList.remove("selected"),m.innerHTML="<p>Removed the domain for each cell.</p>",g.innerHTML="<p></p>",Ie(u)}),j.addEventListener("click",function(){B(),j.classList.add("selected"),r=!1;let d=document.querySelector(".state");d.innerHTML=h[a];let m=document.querySelector(".explanation");m.innerHTML="<p></p>",r=!1,clearInterval(s),se(),document.getElementById("step").classList.remove("selected"),j.classList.remove("selected"),document.getElementById("showDomainButton").value==="ON"&&X(u)}),q.addEventListener("click",function(){B(),q.classList.add("selected"),clearInterval(s);let d=document.querySelector(".state"),m=document.querySelector(".explanation");if(m.innerHTML="<p></p>",n===0){stepBack.style.setProperty("border","none"),d.innerHTML="<p>At the beginning.</p><p>Use controls to play the solution.</p><p>Or choose a different puzzle or solver.</p>";return}d.innerHTML="<p>Undoing the previous step.</p>";let g=document.getElementById("showDomainButton");if(n>0){if(u=Ce(Math.max(n-1,0),u),g.value==="ON"){let b=o[n];getDomain(b[0],b[1],u),X(u)}n-=1}else{if(clearInterval(s),g.value==="ON"){let O=o[n];getDomain(O[0],O[1],u),X(u)}n=0,r=!1;let b=document.querySelector(".explanation");b.innerHTML="<p>Undid all moves back to beginning.</p><p>Continue using controls to play the solution.</p><p>Or choose a different puzzle or solver.</p>"}q.classList.remove("selected")});function B(){C.classList.remove("selected"),A.classList.remove("selected"),$.classList.remove("selected"),V.classList.remove("selected"),H.classList.remove("selected"),j.classList.remove("selected"),q.classList.remove("selected")}function ie(){clearInterval(s),w=1e3,n=0,r=!1,E(u)}function E(d){let m=document.getElementById("showDomainButton");m.value==="ON"&&(m.value="OFF",showDomainButton.classList.remove("selected"),Ie(d)),i&&!(typeof o>"u")&&!(typeof n>"u")&&(me(o[n][0],o[n][1],o[n][3]),i=!1)}function Ce(d,m){if(E(m),d>n)throw"Rewinding, so new location must be before current";if(d===n)throw"Rewinding, but new location is same as current";return St(x,o,d,i)}try{Q(S,I(f)),u=M(S),ie(),o=re(f)}catch(d){console.error("Error during grid setup:",d)}}),Ge();var T=Et();rt(f=>{var C=_t();lt.title="Sudoku Solver",P(f,C)});var y=L(T),F=_(L(y),4),Y=L(F),ee=L(Y),ge=L(ee),be=_(L(ge),4),te=L(be);te.value=(te.__value="easy")==null?"":"easy";var ne=_(te);ne.value=(ne.__value="medium")==null?"":"medium";var oe=_(ne);oe.value=(oe.__value="hard")==null?"":"hard";var le=_(oe);le.value=(le.__value="evil")==null?"":"evil";var ye=_(le);ye.value=(ye.__value="random")==null?"":"random",k(be),G(6),k(ge),G(2),k(ee);var xe=_(ee,2),we=L(xe);dt(we,()=>M(S),f=>{var C=It(),A=L(C);Te(A,5,()=>M(S),Ae,(V,H,j)=>{var q=qt();ue(q,`row-${j??""} svelte-yg3fx0`),Te(q,5,()=>M(H),Ae,(D,$,J)=>{var K=Ue(),U=at(K);it(U,()=>M($)>0,z=>{var w=Tt();ue(w,`sudokubox col-${J??""} fix svelte-yg3fx0`);var se=L(w,!0);k(w),Be(()=>_e(se,M($))),P(z,w)},z=>{var w=At();ue(w,`sudokubox col-${J??""} svelte-yg3fx0`),P(z,w)}),P(D,K)}),k(q),P(V,q)}),k(A),k(C),P(f,C)});var ke=_(we,2),Se=L(ke),ae=_(L(Se),14);ut(ae);var Le=_(ae,2),$e=L(Le);k(Le),G(6),k(Se),k(ke),k(xe),G(2),k(Y),k(F),G(8),k(y),k(T),Be(()=>_e($e,`Current speed: ${M(l)??""}`)),ft(ae,()=>M(l),f=>Q(l,f)),P(e,T),ot()}export{$t as component};
